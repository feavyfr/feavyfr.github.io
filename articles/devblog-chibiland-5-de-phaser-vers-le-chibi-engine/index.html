<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" content="Blog personnel, Informatique, multimédia"/><meta data-react-helmet="true" charSet="utf-8"/><meta name="generator" content="Gatsby 4.15.1"/><style data-href="/styles.3379ff33991c4dc84ddb.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Lalezar&family=Maven+Pro:wght@400;500;600&family=Montserrat+Alternates:wght@700&display=swap);*{font-family:Arial,Helvetica,sans-serif}html{scroll-behavior:smooth}*{font-family:Maven Pro,Arial,Helvetica,sans-serif}a{color:#42a5f5;text-decoration:none}body{background-color:#f5f7fb}#main{flex-direction:column;margin:0 auto;max-width:1135px}#main,header{align-items:center;display:flex;justify-content:center}header{margin:2em 0}#icon{height:130px;margin-right:100px;width:130px}#icon,h1{vertical-align:middle}h1{color:#3f51b5;font-family:Lalezar,Arial,Helvetica,sans-serif;font-size:128px;font-style:normal;font-weight:400;height:182px;letter-spacing:.04em;margin:0;padding-right:230px;text-align:center;text-transform:uppercase}@media screen and (max-width:850px){#icon{height:120px;margin-right:2em;width:120px}h1{font-size:120px;height:160px;padding-right:0}}@media screen and (max-width:495px){#icon{display:none}h1{font-size:90px;height:120px}}article{background-color:#fff;border-radius:5px;box-shadow:0 0 10px -4px rgba(0,0,0,.1);box-sizing:border-box;margin-bottom:2em;padding:1em;width:100%}article .title{font-size:40px;line-height:45px;margin:.5em 0}.date{font-weight:500!important}.content p{color:#444;font-weight:400;line-height:20px}.columns{display:flex;gap:40px;margin-bottom:1em}.column{flex-grow:1}.column-icon{display:flex;flex-direction:column;justify-content:center}@media screen and (max-width:768px){.columns{flex-direction:column;gap:20px}.column img{max-width:100%}}.table-of-contents{border:1px solid #ccc;border-radius:4px;display:inline-block;padding:1em}.table-of-contents .index{padding-right:.5em}.table-of-contents>ol{padding-left:0}.table-of-contents p{font-size:20px;font-weight:500}.table-of-contents li{list-style:none;margin-bottom:.5em;margin-top:.5em}.table-of-contents a{color:#666}#articles{display:flex;flex-direction:column;width:100%}#articles article{background-color:#fff;border-radius:5px;box-shadow:0 0 10px -4px rgba(0,0,0,.1);box-sizing:border-box;margin-bottom:1.5em;padding:1em;width:100%}article a{text-decoration:none}article h2{color:#202020;font-family:Montserrat Alternates,Arial,Helvetica,sans-serif;font-size:24px;font-style:normal;font-weight:700;line-height:30px}article .date,article .date .edited{color:#777;font-family:Maven Pro,Arial,Helvetica,sans-serif;font-size:16px;font-style:normal;font-weight:600;line-height:28px;text-transform:uppercase}article .date .edited{font-size:13px;font-weight:500;padding-left:10px}article .excerpt{color:#888;line-height:20px}article .excerpt,article .read-more{font-family:Maven Pro,Arial,Helvetica,sans-serif;font-size:16px;font-style:normal;font-weight:500}article .read-more{color:#2d9cdb;line-height:28px;text-transform:uppercase}.head{display:flex}.tag{background-color:#42a5f5;border-radius:20px;color:#fff;cursor:pointer;font-family:Maven Pro,Arial,Helvetica,sans-serif;font-size:14px;font-style:normal;font-weight:500;margin-left:1em;padding:.33em .8em;position:relative;top:5px}.tags{flex-grow:1;text-align:right;vertical-align:middle}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Feavy • Devblog Chibiland #5 — De Phaser vers le Chibi Engine</title><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=9faf4a2c095179423c5ba5b0c03f0198" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main id="main"><a style="text-decoration:none" href="/"><header><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIMAAACDCAYAAACunahmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA5USURBVHgB7Z0LkBP1Hce//024O0FrQMdapBhoEVSeI7VjO5WcY9sRpORstXW05WR0Rh0tMLbUqu3dSVWKrTzsy1ELdtqxzlgvVg4cWyXHYAUB705RD6gaQVAUjyBwj+SSv///bpJLcptkN9lNdjf/z0wI2ezmkt3v/l7/F4FD8flbPUCNl/13Jnucyx5eEOKloB4C4uHPbJtH5dAwez/M3pefQWmIbeOP94E4ex7sDAYawnAgBA5AufDumZAkH3s5g1LwZw/MgwulkwklyATS7hSB2FYMPv9zPvniUzKH3cU+VBgmjqAiDjwbDMzrhA2xlRhkAYAsoIQ0wtw7v1RCoAgSxJ8IBuYHYRMsLwbZBUg1S9jJXUAV/283QoTSZiDazlxJCBbGsmJIuIGFzP/7YW0roB2K9QSRFquKwnJikEVAXE1WiAPMQokvYi1WcyGWEUM1iCAbRRQDN1jFUlRcDD7/Ji+V6CoWiftRrVjEfVRMDMnAkMUEi+GUmKBECEFL8Jl5zagQFREDdwmUuNaxW8ILQTYs+4jUV8JKlFUMsjUgNc0sRVwMQV4qYSXKJgY5NiDxVtizVlApymolJJQB31UblzAhdEAIQS/sBqrp8Pk3LEEZMN0y+BraVgu3UDrlcBumiUGJD2pbq6luUAY6mdtoMMttmCIGJT6gm0W2YAqmxRGGi0EIoSyYIghDA0ifv22mEEJZ4IHlZuaKvTAQwyxDInXkGYOoJpaPMKGoN6ozjSGWYcg1CCGUGQ8laDXKQpRsGUSMYAkMiSFKEoMQgqXggphVSsfcktyEUl4WQrAI7MasbUUJFC0G31VtzRDlZYtBfZf6N65CkRTlJuS2BkqL/qMCcyGULg0GrlwNnegWg0ghbUE4ET+E9Byk202IFNIWsJSzplUZaaYdXWJQ4gQRMNqEmXHUNuk5QLObSLiH9yCwFYTG67V2ydcshjkNG9/TYhVYYJnv3dSfJGnbqPyKDvtaZNjR2Z9NVPZB1mep7aXts4rdi6ie1uHfLLUfkfsr6IQg76keQnP9wQ0NcPfALrJXy77nnF2Llp/PVnmHyj6JJn40pXH+zzAJ5Huttp2kPl3/Pun7kYxvmhuiY5+M/VR+DEn9cQK3263tzmT7f9LTj1+v7EDfQFzLEV6ghncuaim0Y8G/r9c9TBhfh3WrL4PAHD47EcXie7bhvf3H9RymKbsoHEBKcX1BiH57J9BINBrHyj+8rlcIHA+VagrWhfKKQbYKFI3QAaFCDGbAY7FH/7EHW189jKKg8CtTGuQmv2UgdB10/01tUY1AH89vPoh/tYVQCpS48lr5nGKQRz0V0ZnVJQkxGM3LOw5jzaNvIhYr9dxSXz7rkNsyFFBRLj49FoPAON7cE8YKFif0DxhzXvNZB1UxyLFCkV3ce45GceCgIydDKzs94QEsX9WB48ejMI7c1kHdMujMILJZ+9hbBYpPgkL09g3irvt34qOP+2A0rOKzUG37MDEUk0Fks6MrjIcffx2C4ohE4ljx8Ovo/v8xmALhmcXwRiyVCmTcBwPY8J9DqBnhws0Lp6IYuvcdwadHB+SKW3YlcfgLpHai+fbL9Vkq+6lS6LNyVKELfX9uRGOxGHtWNu7sOoot2z6CiXjUqpLDxEAJaYIB6WEkStG66QDGjK7FNd+bBL1IkoQVa9/A8V5NJVeBTtgV5jPlZIjBlf5CmVeJGDbil4kdu7uPYVQdcP55Y3Qde8aYU/C1mWciuPUDJiwIjIbg7AlTrm0PdT8ZSm7KjBkk9cCiFPr6Y3jsyXew6UXNzRspJk30oGXZLNTViqqmOZAF6a8yxMB8lg8mcLI3hj+t34fNL++HXmZN+yKa7pjBWvUgMJjETLspUm6Cj5NkpuNOmESENbK8sutjTPKOxLixX9B8HG/4+vLY0zB54ii8tPXDRN8HgUHUpbuKdMuwACYTiQD3rnqDxRFHoJevXzQWP7vlAohGUaOR5qT+l9pGzHER2fT2xdH84Gt4a88n0MvcyydgyU2TUTtCKMIoaNp1l90EL0CwmvVfUCZ6++Po2P0pZlw4mqWep+g6dspXx7CAEuz4o4iLrNMIvBOmXL0m1P1Uf8IyuMs+MurQ4QHc/cBO1o7xGfRyNatb3HTdRNZCCoEhKNc/cTqH/EY5OXwkintWbMeHh09AL1fPn4Trv+8VMYQhKNdfEUOZ4gU13j8YRdODr+JouFfXcbxC+ZNrpmD+t8cKQZRIch0PSXlBKzqAdu+7/Vh27zacODGg6zgX8xOLb5qOy791pkg4S4HIa3qBKMFjzVFYgKmTR2Llry7ByJG1uo4bHIyx+ONVbO+wxM+wJYRGRkuVCB5zsXtPL5av2sXqEYO6jnO7XVh+58WsLeN0CIqlxsvEIHlhIV7ZFWatlTvlu10PvLl8+bKLMfW8kRAUA53BY4ZzYTFe+l8Plj+0Q3dvqbq6EXiw+ZusgUtf7ULAIdwy8OFX1qN9Ww9+u3a7bkGcwgTxUPMlGD9WX9xR7bAkgomBEC8syvPtPVj7eJduQZx2ah2W3TYLAl143Yk1oS3LhhcOsbYICTcvnK7rOLe7uPLkqaNG4KwzakCkxFjZNCFmDAomQ6Oo1cRKdewnv5uWG+//oA/RwXJ3KCYed2KRcFiVKEssntl0EG4XwY3XT9N+YBE/6bRRbiy6dhIa5npRKXZ1HUHT7zrY7y5z9y4Cj2R1y8CJRCiebjuIp5/rhllwIdy26MKKCqH7nWO4f20XTpysSD8/D7eltpifqX8gjr/+M4TnXtgHo+EuhQvhu/XnoFJ8/EkfS6m7lB7hlcFjq3Y/3hfikb+9i/8G34dRcCHccfPUigqBW4LfP7IboQP6G+yMxHaNwCd6Y1j5593Yul1/f8psXKyx6/ZF5+OKy8ahUshD7f++B9tf09/Zx2hs2c00EiW4b81u3LKQYtTIEar7HDpcuBW0rk7CuC+NQiVZ/9Q+/PuFA7ACZE5DW1UPihxzeg1+88vZuOC88odOG188gIceeZOV3q3RZYu7iaoeMt1zLIJ7VuzE3ndMGteYg7f3hvHHdW9bRgiMsMTqDFU/fr4nHMGd9+3AW3vLcyoOfdSLu1fswslefa2zJhPmdQYxmQIUQXALYbYgTvZF8YvlO+S5FywFRZhXIMNiHiYFLoi7HtiJ6VNOZZkGUZ1gNBNlIkdebk6ew1TpmSjHkrTD+Z77D/bjwIcnYT1o2M1ym5DoMzZEmMUQW7b3oAoJ8QAyBEHVwyyaLAbjynkCG0NlMRiyJqIV+cbss0Q3eo0QInExREJwGPz633jdZNx/12wsu3W6mMJYA5QOdMlniVUheR9zR6wuw6/7omsn48c/+Epq26aXPpDnXBY5U07C7a3zRssNVewEBuEA6mpdWHjNpAwhcHhD1LLbhYXICaVyqKC0WsbtHzdwIfzIPxGNP1SfTOyK+nH46Y0XCEGowDKJIH9ONGHH22FzGuaOzymEJPO/Mx63Nk6BIBN2gwT5c0IMg7a3DBdNKxzy8H6U01h1UcQOmfDgkT/LYlDWL1LUIagyKA0m169K9XQibCMEVQdJMwJp3d7sHjdoDwxFCJnBs8n/pMSQWPvQxs3Z2iMBETOkCAUD81LxYkaHWELJetgSlXUCc+1JhBRS0Mz6Ulbv6NizqAKEm1CQSObNnyGGhKuwaZqp/RIL2yAT2tw6NyNOHDZuglnRAASOh2WPzdnbVAbRRNbAdoGknntdOAmF6LDscZgYeAGCle+dax3E2ln83lmvthSy+vC6ePwJOJhqtw0EkRa17apiUAJJ55anq9o2KOXnkNpbOQfeEhprgROpcrMgEak553u53rCfdRCxQEGYVchOJ9PJOyTfPtZBZAhaIIjekO/9vGKQrQMhNsgshq1mKcgmRwaRTsHJOkicLIWjRmpXp2hyZRDpFBRDMHBFiFUlV0NgW1hppbmQVeBonMaHVyVJCA6gCmtOoS2BeZpiP01ikKuSNHYDBLaD0Ei91n01T/DFg0lKiSPcRbVEDVrdQxJds71JGODmxvY9qavEU2h2D0l0iUFxF1IDqnweKBsQ1uMekuieB1LOLgi1b6m6CnyEXveQpKhJQYPPXLnaWvGDjj6QDncSXAjMPaxBERQ9Q+yWwNyl1mm70FOBJE42Dp1644R0SpoumNCBBjvWHxxqG1hxMNKAEihJDEpASertJAiHFp24EOqLiRPSKXkicaVcbQVBVG1DlSFC4Bgyq7wiCGqblNNBsgkbJQSOYUsM8GFarAYxq3IWouoaHXgDomFC4Bi63oR1XEZ+HCCbhGuYZ2g12PDFR+wiCBsTMtI1pGPK4iNcED7/pnpKaCt7WZa1tvm8z+kLjsjzOcvlB8rHFKbmgzzSY7EJvPVAaZAg2pCcXMNoTI+lLvW3NbEL0QyTcbmGfgrJqDMqYkj+0nicIhazn6OglK7eErhyKUykLIG176oNS1j5ugkOmWuyzIRLKTHroWxZFnMbXuY2NjONeyHQSievKpoRH6hR9pS7XG7D7nC3ICHaYlZ8oEZF6i/CSuQlJIE05hvsYhYVLcYJK5EBjw2YNYisKac1SKfilVluJSDFm9iJaES1QkiAxAeWlis2yPk1YBFk14HYOnZifKgWWN2AD4SthEtQw3JtNvUNG+fEabzZ0aKwmAiSWLYBz4HuI8zqXwE+w5rVRJDE8q25sigQ91HCi1Y2zD4o7aQggUoGhlqxVdM+dyEsJW1k1UyfxYURJpSuJ0QKWNUKqGHbfh4+fxtvAFtAQX2WiC9YHMAsQNBFSNBOAkjHEZ1+fP5WDyG1M1jVzpcQBxeKme0g3P+zi49OfvH5eg1WdwFacGzHwSGBwMtdClXcCnsQD/vVXCjJRzZhKBc7DGWd8BCR+2bwB+3iq/054cKr8TmSsseat1fa4wAAAABJRU5ErkJggg==" alt="icon" id="icon"/><h1>Feavy</h1></header></a><article><div class="head"><span class="date">17 décembre 2022<span class="edited"> modifié le <!-- -->05 mai 2023 à 13:14</span></span><div class="tags"><span class="tag">Chibi Engine</span><span class="tag">Chibiland</span></div></div><h2 class="title">Devblog Chibiland #5 — De Phaser vers le Chibi Engine</h2><div class="content"><p>En Mai 2021, alors que je m’intéressais beaucoup à WebAssembly, je me suis mis à chercher un moteur de jeu C++ pour le web. J’entends par là un moteur qui permette de coder son jeu de A à Z en C++, comme <a href="https://www.cocos.com/en/cocos2dx">Cocos2dx</a>, pour ensuite le compiler en WASM et l’exécuter sur le Web (ce que Cocos2dx ne permet pas). Je n’en ai jamais trouvé et d’ailleurs je ne connais toujours pas tel moteur à l’heure actuelle.. donc si vous en connaissez, je suis preneur 😃</p><p>Bref, ça m’a donné une idée un peu folle : créer mon propre moteur de jeu 2D pour le Web en C++ et OpenGL : le <a href="https://cherrygameengine.github.io/">Cherry Engine</a>.</p><p>L’objectif du moteur était d’être simple et efficace et de permettre de coder des jeux web entièrement en C++. A côté de ça le but pour moi était d’apprendre le rendu OpenGL tout en me perfectionnant en C++.</p><p>Alors j’ai commencé à apprendre OpenGL avec <a href="https://learnopengl.com/">cette très bonne ressource</a> mais j’ai assez vite décroché par manque de temps et motivation.</p><p>Le Cherry Engine était un side-project fun, certes, mais je savais qu’il ne pourrait pas rivaliser avec les principaux moteurs de jeu web.</p><p>Déjà d’un point de vue performances, car il faut bien s’y connaître pour savoir optimiser le rendu OpenGL. C’est vraiment une compétence spécifique que j’aurais mis beaucoup de temps à acquérir.</p><p>Mais aussi d’un point de vue simplicité d’utilisation. J’ai fait le choix d’utiliser le langage C++, un langage par nature plus compliqué que JavaScript ou TypeScript, alors que le but et de viser les plateformes web. Je voulais faire un moteur de jeu web simple… en C++, un choix insensé.</p><p>Alors j’ai mis ce projet de côté car je savais qu’il serait peu pertinent et empiéterait sur le temps que je pourrais consacrer à Chibiland.</p><p>Mais à côté de ça…</p><div class="table-of-contents"><p>Table des matières</p><ol><li><a href="#phaser-commençait-à-me-fatiguer"><span class="index">1</span> <!-- -->Phaser commençait à me fatiguer</a><ol><li><a href="#un-rythme-de-mise-à-jour-très-aléatoire"><span class="index">1.1</span> <!-- -->Un rythme de mise-à-jour très aléatoire</a></li><li><a href="#un-moteur-pas-suffisamment-modulaire"><span class="index">1.2</span> <!-- -->Un moteur pas suffisamment modulaire</a></li><li><a href="#des-bugs-introduits-dune-version-à-lautre"><span class="index">1.3</span> <!-- -->Des bugs introduits d’une version à l’autre</a></li><li><a href="#pas-assez-axé-poo-dynamisme"><span class="index">1.4</span> <!-- -->Pas assez axé POO, dynamisme</a></li><li><a href="#une-api-lourde"><span class="index">1.5</span> <!-- -->Une API lourde</a></li></ol></li><li><a href="#il-fallait-changer-de-moteur"><span class="index">2</span> <!-- -->Il fallait changer de moteur</a><ol><li><a href="#le-chibi-engine-vers-un-any-engine-"><span class="index">2.1</span> <!-- -->Le Chibi Engine… vers un Any Engine ?</a></li></ol></li></ol></div><h2 id="phaser-commençait-à-me-fatiguer" style="position:relative"><a href="#phaser-commen%C3%A7ait-%C3%A0-me-fatiguer" aria-label="phaser commençait à me fatiguer permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://phaser.io/">Phaser</a> commençait à me fatiguer</h2><p>Phaser est le moteur que j’utilise actuellement pour Chibiland et il me déplaît pour plusieurs raisons:</p><h3 id="un-rythme-de-mise-à-jour-très-aléatoire" style="position:relative"><a href="#un-rythme-de-mise-%C3%A0-jour-tr%C3%A8s-al%C3%A9atoire" aria-label="un rythme de mise à jour très aléatoire permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Un rythme de mise-à-jour très aléatoire</h3><p>On a eu la 3.24.1 en juillet 2020, puis une bêta pour la 3.25… puis en fait non, c’est passé à la 3.50 directement. On a eu des bêtas jusqu’à la dixième en novembre puis la release 3.50 en décembre 2020. Ensuite c’était calme, 51, 52, 53, 54, 55, 60.. aie! On a encore perdu le compte !</p><p>Bon en réalité ces sauts dans les versions sont là pour signifier que la nouvelle version introduit <strong>beaucoup</strong> de changements dont certains qui cassent la rétrocompatibilité. Mais je pense qu’il doit y avoir un meilleur moyen pour le notifier.</p><p>Peut-être avec un format <code>[1-4].[major].[minor].[patch]</code></p><p>Et maintenant ça fait plus d’un an qu’il n’y a pas eu de release, certes on est à la neuvième bêta de la 3.60 mais je suis un peu réticent à utiliser une version bêta en production. L’idéal aurait été de scinder cette mise-à-jour en plusieurs (voire en 5 pour garder le compte) mais on dirait que Rich (le développeur principal de Phaser) préfère les grosses mises-à-jour façon Minecraft.</p><h3 id="un-moteur-pas-suffisamment-modulaire" style="position:relative"><a href="#un-moteur-pas-suffisamment-modulaire" aria-label="un moteur pas suffisamment modulaire permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Un moteur pas suffisamment modulaire</h3><p>Le point d’entrée de Phaser est le module global <code>Phaser</code>, lequel exporte tous les modules du moteur. Le problème avec cette méthode est que chaque nouvelle fonctionnalité augmente la taille du bundle même si vous ne vous ne vous en servez jamais.</p><p>Bien-sûr il y a possibilité de faire des build custom de Phaser mais ça reste assez fastidieux à faire je trouve.</p><h3 id="des-bugs-introduits-dune-version-à-lautre" style="position:relative"><a href="#des-bugs-introduits-dune-version-%C3%A0-lautre" aria-label="des bugs introduits dune version à lautre permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Des bugs introduits d’une version à l’autre</h3><p>En passant à la version 50 j’ai eu quelques surprises :</p><ul><li><p>L’effet de lerp qui rend les mouvements de la caméra doux ne fonctionnait plus.</p></li><li><p>Sur Android des artefacts bleus se sont mis à apparaître au niveau des sprites affichés. </p></li></ul><p>Résultat :  J’ai un magnifique dossier <code>fixes</code> avec trois fixes que je suis obligé d’appliquer comme un sale sur le moteur.</p><h3 id="pas-assez-axé-poo-dynamisme" style="position:relative"><a href="#pas-assez-ax%C3%A9-poo-dynamisme" aria-label="pas assez axé poo dynamisme permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pas assez axé POO, dynamisme</h3><ul><li><p>Pas assez axé POO.</p></li><li><p>Pas assez axé dynamisme.</p></li><li><p>Le chargement d’assets ne me plaît pas.</p></li></ul><p>Pas pratique que tous les GameObject prennent la scène dans le constructeur. Un GameObject devrait pouvoir exister sans scène. La scène devrait seulement être nécessaire au moment de l&#x27;ajout du Noeud.</p><p>En fait le moteur ne me paraît pas être fait pour des jeux en ligne, où les ressources doivent être chargées dynamiquement.</p><h3 id="une-api-lourde" style="position:relative"><a href="#une-api-lourde" aria-label="une api lourde permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Une API lourde</h3><ul><li><p>La syntaxe est assez lourde.</p><ul><li>L’API est parfois très moche. Comment savoir si le jeu est joué sur un écran tactile ?
Avec <code>scene.sys.game.device.input.touch</code> bien sûr !</li></ul></li><li><p>Et ça ne s&#x27;améliore pas avec Phaser 4 qui abandonne les méthodes de classe pour passer par des espèces de procédures globales. Chose que je n’avais encore jamais vue.
Par exemple pour ajouter un élément à une scène ce n’est plus <code>scene.add(elmt)</code> mais <code>AddChild(scene, elmt)</code> Niveau autocomplétions ça va être fun.</p></li></ul><p>Bref,</p><h2 id="il-fallait-changer-de-moteur" style="position:relative"><a href="#il-fallait-changer-de-moteur" aria-label="il fallait changer de moteur permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Il fallait changer de moteur</h2><p>Et alors je me suis dit :</p><p>Pourquoi ne pas joindre l’utile à l’agréable ?</p><p>J’ai toujours eu envie de maintenir une bibliothèque pour aider d’autres développeur, designer ma propre API, la rendre la plus intuitive, agréable à utiliser... Créer mon propre moteur est quelque chose qui me permettrait de faire tout ça en m’amusant et tout en étant utile pour Chibiland, c’est le side-project idéal !</p><p>Je me suis donc lancé dans la création du <strong><a href="https://github.com/ChibiEngine/ChibiEngine">Chibi Engine</a></strong> !</p><p>Un moteur de jeu web basé sur <a href="https://pixijs.com/">PixiJS</a> dont le développement sera orienté par Chibiland.</p><p>L’idée est de créer un simple wrapper par dessus Pixi pour rendre le développement le plus simple et efficace possible, en lui intégrant directement des fonctionnalités essentielles comme <strong>le chargement dynamique et transparent des assets </strong>(plus de détails dans un prochain article).</p><p>Pixi est l’idéal pour ça, c’est un moteur très modulaire, robuste, puissant et léger. Il offrira probablement un gain de performances à Chibiland tout en diminuant la taille des bundles.</p><p>Un seul moteur physique sera intégré : PlanckJS, bien mieux que MatterJS (présent de base dans Phaser). Avec une couche d’abstraction par dessus pour en faciliter l’utilisation et donner la possibilité d’utiliser une autre implémentation, comme <a href="https://github.com/Birch-san/box2d-wasm">box2d-wasm</a> par exemple.</p><p>Le moteur intégrera également un système d’animation personnalisé. J’ai eu une idée de spécification pour faire des petites animations simples, quelque chose à cheval entre le frame par frame et Spine qui fonctionnera très bien pour Chibiland. Et dans l’idéal j’aimerais aussi faire un éditeur d’animation avec.</p><p>Tout ça fera beaucoup de travail 🥵</p><p>Je ne vais détailler plus les fonctionnalités ici, je ferai un autre article pour ça. Le but était plutôt d’expliquer les raisons de ce changement. D’ailleurs je pense même créer une série spéciale de devblog pour le Chibi Engine.</p><h3 id="le-chibi-engine-vers-un-any-engine-" style="position:relative"><a href="#le-chibi-engine-vers-un-any-engine-" aria-label="le chibi engine vers un any engine  permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Le Chibi Engine… vers un Any Engine ?</h3><p>J&#x27;ai eu autre idée pendant que je réfléchissais au moteur.</p><p>Depuis le début je le voyais comme un wrapper par dessus PixiJS pour abstraire le rendu compliqué et fournir une API toute simple pour créer des jeux. Mais en y réfléchissant je me suis demandé..</p><p>Qu’est-ce-qui m’empêcherait d’utiliser un autre moteur que PixiJS en dessous ?</p><p>Rien !</p><p>Il pourrait marcher avec n&#x27;importe quoi. Pixi, Phaser.. Même <a href="https://github.com/cocos2d/cocos2d-x">Cocos2d-x</a> pour faire des versions <strong>natives pour mobiles et desktop</strong>, ou <a href="https://threejs.org/">three.js</a> pour faire de la 3D !</p><p>Cela permettrait d’améliorer les jeux beaucoup plus rapidement si les technologies évoluent.</p><p>Il serait même possibilité de créer un environnement de développement complet autour du moteur, dans le même style que Unity pour créer le jeu. Cela permettrait en quelque sorte d’unifier les petits moteurs open-source sous un même éditeur pour faciliter la création de jeux.</p><p>À voir la pertinence que ça peut avoir.</p><p><strong>Suite :</strong></p><p>Page not found 23835940-46b0-445d-8dc3-74a45065838f</p></div></article></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/devblog-chibiland-5-de-phaser-vers-le-chibi-engine/";window.___webpackCompilationHash="d8db5dffffc38afd6e4c";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-85e1459f3cc819d4a4f5.js"],"app":["/app-4afb9c4d27b122aabf79.js"],"component---src-articles-template-tsx":["/component---src-articles-template-tsx-c4cff1c073282239fa18.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-7375fe238a5d5288c275.js"],"component---src-pages-articles-tsx":["/component---src-pages-articles-tsx-69880add1070249e2417.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-bb0adf08cafe595fb2e1.js"],"component---src-pages-push-tsx":["/component---src-pages-push-tsx-d626a4c80d52ae46af11.js"]};/*]]>*/</script><script src="/polyfill-85e1459f3cc819d4a4f5.js" nomodule=""></script><script src="/app-4afb9c4d27b122aabf79.js" async=""></script><script src="/framework-8d932ef92bc23aab08af.js" async=""></script><script src="/webpack-runtime-b3ad7a3b01dab01231b2.js" async=""></script></body></html>