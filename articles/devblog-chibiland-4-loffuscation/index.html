<!DOCTYPE html><html lang="fr"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" content="Blog personnel, Informatique, multimédia"/><meta data-react-helmet="true" charSet="utf-8"/><meta name="generator" content="Gatsby 4.15.1"/><style data-href="/styles.3379ff33991c4dc84ddb.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Lalezar&family=Maven+Pro:wght@400;500;600&family=Montserrat+Alternates:wght@700&display=swap);*{font-family:Arial,Helvetica,sans-serif}html{scroll-behavior:smooth}*{font-family:Maven Pro,Arial,Helvetica,sans-serif}a{color:#42a5f5;text-decoration:none}body{background-color:#f5f7fb}#main{flex-direction:column;margin:0 auto;max-width:1135px}#main,header{align-items:center;display:flex;justify-content:center}header{margin:2em 0}#icon{height:130px;margin-right:100px;width:130px}#icon,h1{vertical-align:middle}h1{color:#3f51b5;font-family:Lalezar,Arial,Helvetica,sans-serif;font-size:128px;font-style:normal;font-weight:400;height:182px;letter-spacing:.04em;margin:0;padding-right:230px;text-align:center;text-transform:uppercase}@media screen and (max-width:850px){#icon{height:120px;margin-right:2em;width:120px}h1{font-size:120px;height:160px;padding-right:0}}@media screen and (max-width:495px){#icon{display:none}h1{font-size:90px;height:120px}}article{background-color:#fff;border-radius:5px;box-shadow:0 0 10px -4px rgba(0,0,0,.1);box-sizing:border-box;margin-bottom:2em;padding:1em;width:100%}article .title{font-size:40px;line-height:45px;margin:.5em 0}.date{font-weight:500!important}.content p{color:#444;font-weight:400;line-height:20px}.columns{display:flex;gap:40px;margin-bottom:1em}.column{flex-grow:1}.column-icon{display:flex;flex-direction:column;justify-content:center}@media screen and (max-width:768px){.columns{flex-direction:column;gap:20px}.column img{max-width:100%}}.table-of-contents{border:1px solid #ccc;border-radius:4px;display:inline-block;padding:1em}.table-of-contents .index{padding-right:.5em}.table-of-contents>ol{padding-left:0}.table-of-contents p{font-size:20px;font-weight:500}.table-of-contents li{list-style:none;margin-bottom:.5em;margin-top:.5em}.table-of-contents a{color:#666}#articles{display:flex;flex-direction:column;width:100%}#articles article{background-color:#fff;border-radius:5px;box-shadow:0 0 10px -4px rgba(0,0,0,.1);box-sizing:border-box;margin-bottom:1.5em;padding:1em;width:100%}article a{text-decoration:none}article h2{color:#202020;font-family:Montserrat Alternates,Arial,Helvetica,sans-serif;font-size:24px;font-style:normal;font-weight:700;line-height:30px}article .date,article .date .edited{color:#777;font-family:Maven Pro,Arial,Helvetica,sans-serif;font-size:16px;font-style:normal;font-weight:600;line-height:28px;text-transform:uppercase}article .date .edited{font-size:13px;font-weight:500;padding-left:10px}article .excerpt{color:#888;line-height:20px}article .excerpt,article .read-more{font-family:Maven Pro,Arial,Helvetica,sans-serif;font-size:16px;font-style:normal;font-weight:500}article .read-more{color:#2d9cdb;line-height:28px;text-transform:uppercase}.head{display:flex}.tag{background-color:#42a5f5;border-radius:20px;color:#fff;cursor:pointer;font-family:Maven Pro,Arial,Helvetica,sans-serif;font-size:14px;font-style:normal;font-weight:500;margin-left:1em;padding:.33em .8em;position:relative;top:5px}.tags{flex-grow:1;text-align:right;vertical-align:middle}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Feavy • Devblog Chibiland #4 — L’offuscation</title><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="icon" href="/favicon-32x32.png?v=9faf4a2c095179423c5ba5b0c03f0198" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=9faf4a2c095179423c5ba5b0c03f0198"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main id="main"><a style="text-decoration:none" href="/"><header><img src="data:image/png;base64,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" alt="icon" id="icon"/><h1>Feavy</h1></header></a><article><div class="head"><span class="date">01 octobre 2022<span class="edited"> modifié le <!-- -->05 mai 2023 à 13:14</span></span><div class="tags"><span class="tag">Chibiland</span></div></div><h2 class="title">Devblog Chibiland #4 — L’offuscation</h2><div class="content"><p>Petit article un peu hors-série pour parler de l’offuscation JavaScript car je trouvais ce sujet intéressant. </p><p>Attention cet article-là est technique 🧑‍💻</p><p>Cela fait un moment que <a href="https://github.com/javascript-obfuscator/javascript-obfuscator">l’offuscateur JavaScript que j’utilisais</a> m’embêtait (pour ne pas dire un mot plus vulgaire).</p><p>En fait dans sa configuration la moins brutale on se retrouve avec ce genre de choses en sortie :</p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1024px">
      <a class="gatsby-resp-image-link" href="/static/d42ad28ae8106d1a763b2c0618d6a062/b67f3/9d338a64-4951-469e-a124-2716b2d158ec.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:41.79687500000001%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQ0lEQVQoz01S2Y6DMAzk/z9wIYlzUFjuqrBS+1BoZzUGuhvJshMSz2GylCJCjPDeg3VKCSFEXC4XhBCQUokYI8oyIfig3xkigrIs0bYtvusa1+sV27YhizHAOQdjjGZrLazda2OtZu+DAjrr4JzoHa2tVcBhGHC73fB6vZARhZe9iGZxDuJE2caDOXMMe02WZKfhBFVVYRwnLPOC53NFVlIiHxwNKHNvLHAiCATzu4r/wXt1VavkruuwLD9Y1xVZCB6WrBTVfx6wKaXx3B3frXX4ynMUhVGLeEaGbPh4PHbJpywyUmkxaRCI/lJq0zQYxxHjMGKaJszzrPu+79Ef/rGhDoUscqLmhaJybwoDa+yHbVEU8F4+lpw+kgjZ3e93vN9vcGV/wxB48cro9JET5Z5W0CtOk7ltGnRtp7/KyYyLTX8BqUhHDRg0fj8AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="image" title="image" src="/static/d42ad28ae8106d1a763b2c0618d6a062/2bef9/9d338a64-4951-469e-a124-2716b2d158ec.png" srcSet="/static/d42ad28ae8106d1a763b2c0618d6a062/6f3f2/9d338a64-4951-469e-a124-2716b2d158ec.png 256w,/static/d42ad28ae8106d1a763b2c0618d6a062/01e7c/9d338a64-4951-469e-a124-2716b2d158ec.png 512w,/static/d42ad28ae8106d1a763b2c0618d6a062/2bef9/9d338a64-4951-469e-a124-2716b2d158ec.png 1024w,/static/d42ad28ae8106d1a763b2c0618d6a062/b67f3/9d338a64-4951-469e-a124-2716b2d158ec.png 1338w" sizes="(max-width: 1024px) 100vw, 1024px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span><p>A première vue le code est difficile à comprendre ; chaque propriété est remplacée par une chaîne aléatoire à base d’hexadécimal… Cependant, dans cette configuration l’offuscateur conserve la correspondance entre ces chaînes aléatoires et leur valeur initiale pour ne pas casser le code.</p><p>Par exemple on aura :</p><deckgo-highlight-code language="javascript" line-numbers="true">
          <code slot="code">const player = {username: &quot;Flamiche&quot;};</code>
        </deckgo-highlight-code><p>Qui deviendra :</p><deckgo-highlight-code language="javascript" line-numbers="true">
          <code slot="code">const a = {&quot;0x5fd5a&quot;: &quot;Flamiche&quot;};

// Avec quelque part la correspondance :
&quot;0x5fd5a&quot; -&gt; &quot;username&quot;</code>
        </deckgo-highlight-code><p>Ce qui signifie que techniquement le processus est réversible !</p><p>Et en effet avec un script à base d’<a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/eval">eval</a> de ce style, il est possible de remettre les chaînes originale à leur place et retrouver un code proche de celui en sortie de minimisation.</p><div class="link-preview"><a href="https://gist.github.com/Feavy/628913854683fcb396649401eeb2137e">https://gist.github.com/Feavy/628913854683fcb396649401eeb2137e</a></div><p>Au final cette offuscation devient presque contre-productive car elle impacte négativement les performances et alourdit les fichiers sans pour autant rendre le code plus compliqué à comprendre vu que le processus peut être inversé.</p><p>Finalement ça ne fait plus qu’office de barrière à l’entrée.</p><p>Mais ça c’est pour la version “soft”.</p><p>Car en effet, en activant certaines options il y a possibilité de vraiment renommer les propriétés sans garder les originales ! Cela se fait via les options <code>renameProperties</code> et <code>renameGlobals</code></p><p>Mais les utiliser sans casser le code est compliqué.</p><p>Pour les utiliser sans (trop de) problème avec Chibiland j’étais obligé de maintenir un <a href="https://github.com/Feavy/javascript-obfuscator-1/">fork du projet</a> car il fallait parvenir à renommer toutes les propriétés du jeu <strong>mais pas celles du moteur Phaser (et autres bibliothèques)</strong>, sinon le lien entre les sources <strong><em>vendor</em></strong> et les sources du jeu serait perdu.</p><p>L’offuscateur propose une option <code>reservedNames</code> pour pallier ce problème. Comme son nom l’indique elle permet de réserver des noms de propriétés à ne pas modifier.</p><p>Cependant cette propriété prend comme valeur une liste de <strong>RegExp </strong>que les propriétés à conserver doivent matcher. Or avec les bibliothèques que j’utilise ça fait plus de 6000 noms de propriétés réservés… donc 6000 RegExp à tester !</p><p>C’était extrêmement coûteux et en pratique ça n’allait jamais jusqu’au bout.</p><figure class="gatsby-resp-image-figure">
    <span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1024px">
      <a class="gatsby-resp-image-link" href="/static/6e04914c74ecdc65cd7b978e11f6db4d/2eb79/e0690cc0-349f-464f-b2c0-db78af8b9850.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:50.390625%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIklEQVQoz21SWw6EMAjc+59IjVfQE2gtrcZ3jDHxl83QYupmPwyoMMwMfKy1jKf3nr33TEQSm6aR3DknETXIjTFsuo5drFmWhfd957Isua5r/qDIdt0DpAPw3qHROYlk6RnYGsNEAXyeZwEtioKrquJPOl2BlBkafB+YI8c3HaDg4zgKaJ7nARAgKEiLNEcUO/r+xVaHT9PEx3H8AtIzHY2Q1rYte9+/AFI/FRD1kAvAR7IyVDkps7//4nAQWeaFr+t6PJSloMj9+DgMA1PilYKJguixMoVsZSiAqYSwFCey00ZlTLEGjyo5z5PXdRUPX4DapKejDWBl5ExCndftx83jBrdt4yzLgoemNX9uL4D5GIVptAQ5DtsSiTX3fT8MAfgFrVXSJTPhRaMAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="Quelques mots-clés de Phaser et PlanckJS" title="Quelques mots-clés de Phaser et PlanckJS" src="/static/6e04914c74ecdc65cd7b978e11f6db4d/2bef9/e0690cc0-349f-464f-b2c0-db78af8b9850.png" srcSet="/static/6e04914c74ecdc65cd7b978e11f6db4d/6f3f2/e0690cc0-349f-464f-b2c0-db78af8b9850.png 256w,/static/6e04914c74ecdc65cd7b978e11f6db4d/01e7c/e0690cc0-349f-464f-b2c0-db78af8b9850.png 512w,/static/6e04914c74ecdc65cd7b978e11f6db4d/2bef9/e0690cc0-349f-464f-b2c0-db78af8b9850.png 1024w,/static/6e04914c74ecdc65cd7b978e11f6db4d/2eb79/e0690cc0-349f-464f-b2c0-db78af8b9850.png 1256w" sizes="(max-width: 1024px) 100vw, 1024px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span>
    <figcaption class="gatsby-resp-image-figcaption">Quelques mots-clés de Phaser et PlanckJS</figcaption>
  </figure><p>Ce fork <a href="https://github.com/Feavy/javascript-obfuscator-1/commit/e45a6bb37a163d3655c7ea6d4f3ad33206c9b9b7">ajoutait donc une option (exactReservedNames)</a> pour ignorer des propriétés précises <strong>sans utiliser de RegExp</strong>, ce qui permettait de tester toutes les propriétés du jeu en un temps raisonnable.</p><p>Mais Chibiland possède lui aussi son lot de mots réservés. Et donc avant chaque mise en production, le jeu était cassé et je devais deviner les nouveaux mots réservés à ajouter jusqu’à temps qu’il fonctionne à nouveau… C’était assez fastidieux.</p><p>Et avec le passage à SolidJS cela aurait ajouté encore plein de mots réservés à trouver… j’avais la flemme.</p><p>Alors j’ai pris le problème dans le sens inverse.</p><p>Plutôt que donner une liste de mots réservés, pourquoi ne pas donner une liste de mots à masquer?</p><p>C’est ce que j’ai fait avec le “Chibi Obfuscator”, un plugin WebPack tout bête qui fait du search-and-replace à travers le code en sortie de compilation, afin de masquer certaines propriétés.</p><p>Le procédé reste encore très artisanal avec le besoin d’énumérer toutes les propriétés à masquer. L’idéal serait de pouvoir les trouver automatiquement dans le code source mais je n’ai pas encore eu l’occasion de me pencher là-dessus (ça pourrait se faire facilement avec ts-node).</p><p>Avec tout ça je ne sais même plus si c’est vraiment utile d’offusquer le code avec l’outil dont je vous ai parlé, je vais le laisser pour l’instant, par acquis de conscience, mais je pencherai plus en profondeur sur la question dans le futur.</p><p>Voilà pour ce qui est de l’offuscation. C’est peut-être pas très judicieux de parler de cet aspect de sécurité dans un article mais je tenais à le faire car ce sujet m’intéresse beaucoup.</p><p>J’ai souvent été de l’autre côté de la barrière, à essayer de comprendre du code offusqué, notamment pour des jeux Flash comme DarkOrbit :</p><div class="link-preview"><a href="https://github.com/Feavy/darkorbit_preloader">https://github.com/Feavy/darkorbit_preloader</a></div><div class="link-preview"><a href="https://github.com/Feavy/Darkorbit-main.swf-decrypter">https://github.com/Feavy/Darkorbit-main.swf-decrypter</a></div><p>Pour Flash l’offuscation était quand-même beaucoup plus pertinente car les sources étant compilées en bytecode, leur décompilation et analyse dépendait de la qualité des décompilateurs à disposition. Le processus était rendu bien plus difficile que pour JavaScript où tous les outils de debug nécessaires sont intégrés directement dans le navigateur et où il est même possible d’interagir avec le code en temps réel.</p><p>JavaScript est par nature un langage dont on ne peut pas masquer les algorithmes, la seule chose que l’on peut faire est de les rendre plus compliqués à comprendre. Mais avec le temps suffisant il sera toujours possible de retrouver les originaux.</p><p>C’est pourquoi utiliser l’offuscation pour empêcher la triche dans un jeu web multijoueur est une fausse solution, si la triche doit être bloquée quelque part, c’est côté serveur que ça doit se passer.</p><p>Cela évoluera peut-être dans le futur avec la popularisation de WebAssembly, qui ne permet pas de retrouver le code source après compilation. C’est d’ailleurs une des raisons qui m’avait poussé à créer le Cherry Engine, un moteur de jeu web C++.</p><p>Mais pour en savoir plus il faudra lire l’article suivant 😉</p><p><strong>Suite :</strong></p><p><a href="/articles/devblog-chibiland-5-de-phaser-vers-le-chibi-engine">Devblog Chibiland #5 — De Phaser vers le Chibi Engine</a></p><p>Page not found 23835940-46b0-445d-8dc3-74a45065838f</p></div></article></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/articles/devblog-chibiland-4-loffuscation/";window.___webpackCompilationHash="d8db5dffffc38afd6e4c";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-85e1459f3cc819d4a4f5.js"],"app":["/app-4afb9c4d27b122aabf79.js"],"component---src-articles-template-tsx":["/component---src-articles-template-tsx-c4cff1c073282239fa18.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-7375fe238a5d5288c275.js"],"component---src-pages-articles-tsx":["/component---src-pages-articles-tsx-69880add1070249e2417.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-bb0adf08cafe595fb2e1.js"],"component---src-pages-push-tsx":["/component---src-pages-push-tsx-d626a4c80d52ae46af11.js"]};/*]]>*/</script><script src="/polyfill-85e1459f3cc819d4a4f5.js" nomodule=""></script><script src="/app-4afb9c4d27b122aabf79.js" async=""></script><script src="/framework-8d932ef92bc23aab08af.js" async=""></script><script src="/webpack-runtime-b3ad7a3b01dab01231b2.js" async=""></script></body></html>